@page "/manage"
@using BlazorAppForClient.Interfaces;
@using BlazorAppForClient.ViewModels;
@inject IUsersService userService
@attribute [Authorize]
<h3>Profile</h3>


<MudCard>
    <MudCardContent>
        <h3>Edit Profile</h3>

        <MudTextField @bind-Value="user.userName" Label="Username" />
        <MudTextField @bind-Value="user.firstName" Label="First Name" />
        <MudTextField @bind-Value="user.lastName" Label="Last Name" />
        <MudTextField @bind-Value="user.email" Label="Email" />
        <MudTextField @bind-Value="user.phoneNumber" Label="Phone number" />


        <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="Submit">Save Changes</MudButton>
    </MudCardContent>
</MudCard>






@code {
    UserViewModel user = new();


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        user = await userService.GetByNameAsync();

    }

    protected  async Task Submit()
    {

        await userService.UpdateAsync(user);

    }






}
